<div class="right_col">    <?PHP //echo '<PRE>'; print_r($this->type); EXIT; ?>    <?php if (!empty($this->type) && $this->type === 'bulkadd') {         //echo '<PRE>'; print_r('KK'); EXIT;         ?>        <div class="load-box">    <img src="<?php echo $this->mainconfig['publicpath']; ?>/images/loader.gif" width='200px'  class="loder_img1" /></div>         <div class="padding-md">            <div class="row">                <div class="col-md-12">                    <h3 class="page-title txt-color-blueDark" >                        <div><i class="fa fa-eye"> Faculty Allotment [Bulk Add]</i></div>                    </h3>                    <div class="panel panel-default">                        <div class="row">                             <div class="col-sm-3 employee_class">                            <div class="form-group">                                <label class="control-label">Session<span class="asterisk">*</span></label>                                <?php echo $this->form->session; ?>                            </div>							</div>                             <div class="col-sm-3 employee_class">                                <div class="form-group">                                    <label class="control-label">Batch<span class="asterisk">*</span></label>                                    <?php echo $this->form->academic_year_id; ?>                                </div>                            </div>                             <?php echo $this->form->csrftoken; ?>                             <div class="col-sm-3 employee_class">                                <div class="form-group">                                    <label class="control-label">Term<span class="asterisk">*</span></label>                                    <?php echo $this->form->term_id; ?>                                </div>                            </div>                             <div class="col-sm-2 employee_class">                                        <div class="form-group">                                            <button class="btn btn-primary" id="GET">Get Records</button>                                        </div>                                    </div>                        </div>                            <form class="no-margin" id="formValidate1" action="<?php echo $this->form->getAction() ?>" method="post" data-validate="parsley" >                                <div class="ajaxData" id="ajaxData">                                                                    </div>                                     <div class="row">                                    <div class="col-sm-3 employee_class">                                        <div class="form-group">                                            <label class="control-label"><span class="asterisk">Migration Batch*</span></label>                                            <?php echo $this->form->mig_academic_id; ?>                                            <?php echo $this->form->csrftoken; ?>                                        </div>                                    </div>                                    <div class="col-sm-3 employee_class">                                        <div class="form-group">                                            <label class="control-label"><span class="asterisk">Migration Term*</span></label>                                            <?php echo $this->form->mig_term_id; ?>                                        </div>                                    </div>                                </div>                    </div>                          <div class="panel-footer">									                        <div class="row">                            <div class="col-sm-7 col-sm-offset-5">                                <div style="float:left;margin-right:2px;">                                    <button class="btn btn-primary submit">Migrate</button>                                </div>                                <div style="float:left;padding:0px 10px;">                                    <button type="reset" class="btn btn-danger btn-default">Reset</button>                                </div>                            </div>                        </div>                    </div>                </div>                </form>            </div>        </div><script>    $(document).ready(function () {$('#term_id').select2();$('#academic_year_id').select2();$('#mig_term_id').select2();$('#mig_academic_id').select2();    });  //Get Batch By Session    $('body').on('change', '#session', function () {        var year_id = $('#session').val();                //================[Geting Next Session]==============================//        var text = $('#session>option:selected').text();        var textarr = text.split("-");        var nextsession = 0;        var startyear = parseInt(textarr[0])+1;        var lastyear = parseInt(textarr[1])+1;        text = startyear+"-"+lastyear;        $('#session>option').each(function(e){            if($(this).text() == text)            {                nextsession = $(this).val();            }        });        //============================[End get next Session]======================================//                if (year_id) {                        $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-batch'; ?>',                data: {session: year_id}            }).done(function (data) {                                $('#academic_year_id').empty('');                $('#academic_year_id').html(data);                $('#academic_year_id>option:not([value=""])').attr('selected',true);                $('#academic_year_id').select2();                $('#term_id>option:not([value=""])').attr('selected',true);                $('#term_id').select2();                $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-batch'; ?>',                data: {session: nextsession}            }).done(function (data) {                                                  $('#mig_academic_id').empty('');                $('#mig_academic_id').html(data);                $('#mig_academic_id>option:not([value=""])').attr('selected',true);                $('#mig_academic_id').select2();                $('#mig_term_id>option:not([value=""])').attr('selected',true);                $('#mig_term_id').select2();                            });                            });        }    });</script>    <?php } elseif ( !empty($this->type) && $this->type === 'add' || $this->type === 'edit') { ?>        <div class="padding-md ">            <div class="row">                <div class="col-md-12">                    <h3 class="page-title txt-color-blueDark" >                        <div><i class="fa fa-eye"> Faculty Allotment</i></div>                    </h3>                    <div class="panel panel-default">                                                <form class="no-margin" id="formValidate1" action="<?php echo $this->form->getAction() ?>" method="post" data-validate="parsley" >                            <div class="panel-body">                                <?php                                if ($this->type == 'edit') {                                    ?>                                    <div class="row">                                        <div class="col-sm-3 employee_class">                                            <div class="form-group">                                                <label class="control-label">Batch<span class="asterisk">*</span></label>                                                <?php echo $this->result['short_code']; ?>                                                <input type="hidden" id="academic_year_id" name="academic_year_id" value="<?php echo $this->result['academic_year_id']; ?>"/>                                                <?php echo $this->form->csrftoken; ?>                                             </div>                                        </div>                                         <td><?php echo $results['short_code']; ?></td>                                        <div class="col-sm-3 employee_class">                                            <div class="form-group">                                                <label class="control-label">Term<span class="asterisk">*</span></label>                                                <?php echo $this->result['term_name']; ?>                                            </div>                                        </div>                                         <div class="col-sm-3">                                            <div class="form-group">                                                <label class="control-label">&nbsp;</label>                                                <?php echo $this->result['batch_code']; ?>                                            </div>                                        </div>                                        <div class="col-sm-3">                                            <div class="form-group">                                                <label class="control-label">&nbsp;</label>                                                <?php echo $this->result['short_code']; ?>                                            </div>                                        </div>                                        <div  class="col-sm-12" id="employeedata">                                        </div>                                    </div>                                    <?php                                } else {                                    ?>                                    <div class="row">                                        <div class="col-sm-3 employee_class">                                            <div class="form-group">                                                <label class="control-label">Batch<span class="asterisk">*</span></label>                                                <?php echo $this->form->academic_year_id; ?>                                            </div>                                        </div>                                         <?php echo $this->form->csrftoken; ?>                                         <div class="col-sm-3 employee_class">                                            <div class="form-group">                                                <label class="control-label">Term<span class="asterisk">*</span></label>                                                <?php echo $this->form->term_id; ?>                                            </div>                                        </div>                                         <div class="col-sm-3">                                            <div class="form-group">                                                <label class="control-label">&nbsp;</label>                                                <input type="text" id="batch_name" class="form-control" style="background-color:#fdf59a;" readonly />                                            </div>                                        </div>                                        <div class="col-sm-3">                                            <div class="form-group">                                                <label class="control-label">&nbsp;</label>                                                <input type="text" id="batch" class="form-control" style="background-color:#fdf59a;" readonly />                                            </div>                                        </div>                                        <div id="employeedata" class="col-sm-12">                                        </div>                                    </div>                                    <?php                                }                                ?>                                <input type="hidden" name="emp_allotment" id="emp_allotment" value="<?php echo $this->emp_allotment_id; ?>"/>                            </div>                            <div>                                <div class="panel-footer">									                                    <div class="row">                                        <div class="col-sm-7 col-sm-offset-5">                                            <?php if ($this->type == 'add') { ?>                                                 <div style="float:left;margin-right:2px;">                                                    <button class="btn btn-primary submit">Submit</button>                                                </div>                                                <div style="float:left;padding:0px 10px;">                                                    <button type="reset" class="btn btn-danger btn-default">Reset</button>                                                </div>                                            <?php } else { ?>                                                <div style="float:left;">                                                    <button class="btn btn-primary submit">Update</button>                                                </div>                                                <div style="float:left;">                                                    <a class="btn btn-primary" href="<?php echo $this->mainconfig['host']; ?>master/employeeallotment">Back</a>                                                </div>                                            <?php } ?>                                        </div>                                    </div>                                </div>                            </div>                        </form>                    </div><!-- /panel -->                </div><!-- /.col-->				            </div><!-- /.row -->        </div><!-- /.padding-md -->	        <script>              //Get Batch By Session    $('body').on('change', '#session', function () {        var year_id = $('#session').val();        if (year_id) {            $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-batch'; ?>',                data: {session: year_id}            }).done(function (data) {                $('#academic_year_id').empty('');                $('#academic_year_id').html(data);                $('#academic_year_id').trigger("chosen:updated");            });        }    });        </script>    <?php } else { ?>        <?php        if (count($this->messages)) {            foreach ($this->messages as $message) {                ?>                <div class="alert <?php echo $_SESSION['message_class']; ?> ">                    <a type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</a>            <?php echo $this->escape($message); ?>                </div>            <?php }        }        ?>        <!-- widget grid -->        <div class="">            <div class="">                <div class="row">                    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-8">                        <h3 class="page-title txt-color-blueDark">                            <i class="fa fa-bars"> Faculty Allotment</i>                        </h3>                    </div>                    <?php                    if (in_array($this->role_id, $this->administrator_role)) {                        ?>	                        <div class="col-xs-12 col-sm-5 col-md-5 col-lg-4">	                             <a class="btn btn-primary pull-right" style="margin-top: 25px;" href="<?php echo $this->mainconfig['host']; ?>master/employeeallotment/type/bulkadd">Bulk Add </a>                            <a class="btn btn-primary pull-right" style="margin-top: 25px;" href="<?php echo $this->mainconfig['host']; ?>master/employeeallotment/type/add">Add </a>                        </div>                        <?php                    }                    ?>                </div>                <div class="x_panel">                    <div class="x_title">                        <div class="row">                            <div class="col-sm-3 employee_class">                                <div class="form-group">                                    <!--<label class="control-label">Academic Year<span class="asterisk">*</span></label>-->                            <?php echo $this->form->academic_year; ?>                                </div>                            </div>    <?php echo $this->form->csrftoken; ?>                                  <div class="col-sm-3 employee_class">                                <div class="form-group">                                    <!--<label class="control-label">Session<span class="asterisk">*</span></label>-->    <?php echo $this->form->session; ?>                                </div>                            </div>                            <div class="col-sm-3 employee_class">                                <div class="form-group">                                    <!--<label class="control-label">Batch<span class="asterisk">*</span></label>-->    <?php echo $this->form->academic_year_id; ?>                                </div>                            </div>                           <div class="col-sm-3 employee_class">                     <div class="form-group">                         <button class="btn btn-primary " id="getRecords" style="margin-top:23px;">Get Records</button>                     </div>                           </div>                        <div class="clearfix"></div>                         </div>                    </div>                    <div class="x_content">                        <div class="padding-md clearfix">                            <div class="ajaxData" id="ajaxData">                                <table class="table table-striped table-bordered mb30 jambo_table bulk_action" id="dataTable">                                    <thead>                                        <tr>                                            <th>S.  No.</th>												                                            <th>Batch</th>                                            <th>Batch Name</th>                                            <th>Term</th>                                            <th class="no_print">Action</th>                                        </tr>                                    </thead>                                    <tbody>                                        <?php                                        $i = 1;                                        $pagination_tr = '';                                        if (count($this->paginator) != 0) {                                            foreach ($this->paginator as $results) {                                                //print_r($results);die;                                                ?>                                                <tr>                                                    <td><?php                                                        echo $i;                                                        $i++;                                                        ?>                                                    </td>						                                                    <td><?php echo $results['from_date'] . '&nbsp;&nbsp;-&nbsp;&nbsp;' . $results['to_date']; ?></td>                                                    <td><?php echo $results['short_code']; ?></td>                                                    <td><?php echo $results['term_name']; ?></td>                                                    <td><a href="<?php echo $this->mainconfig['host']; ?>master/employeeallotment/type/edit/id/<?php echo $results['ea_id']; ?>" class="edit" title="Edit"><span class="fa fa-edit fa-lg"></span></a>            <?php            if (in_array($this->role_id, $this->administrator_role)) {                ?><!--                                                                                                    &nbsp; | &nbsp;  <a href="<?php echo $this->mainconfig['host']; ?>master/employeeallotment/type/delete/id/<?php echo $results['ea_id']; ?>" onclick="return ConfirmDelete();" title="Delete" class="delete"> <span class="fa fa-trash-o fa-lg"></span> </a>-->                <?php            }            ?>                                                    </td>                                                </tr>                                                            <?php                                            }                                            $pagination_tr = $this->paginationControl($this->paginator, 'Sliding', 'pagination.phtml');                                        }                                        ?>                                    </tbody>                                </table>    <?php echo $pagination_tr; ?>                            </div>                        </div><!-- /.padding-md -->                    </div><!-- /panel -->                </div>            </div>        </div><!-- /.padding-md -->	        <script>              //Get Batch By Session    $('body').on('change', '#session', function () {        var year_id = $('#session').val();        if (year_id) {            $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-batch'; ?>',                data: {session: year_id}            }).done(function (data) {                $('#academic_year_id').empty('');                $('#academic_year_id').html(data);                $('#academic_year_id').trigger("chosen:updated");            });        }    });        </script><?php } ?></div><script>    function ConfirmDelete()    {        var x = confirm("Are you sure you want to delete?");        if (x)            return true;        else            return false;    }    /*          $("#cc_name").change(function(){                    var course_name=$('#cc_name').val();          //alert(coursename);          $.ajax({           type: "POST",          url:'<?php echo $this->mainconfig['host'] . 'master/get-course-category'; ?>',          data: {course_name:course_name}          }).done(function( data ) {                    if((data!='')){          alert("This Course Name Exists");          $("#cc_name").val("");          }          });          });                    */    $("#elc_name").change(function () {        $elc_name = $("#elc_name").val();        if (!isNaN($elc_name))        {            alert("Component Name Should be Characters Only");            $("#elc_name").val("");        }    });//check the same name validation	    $("#elc_name").change(function () {        var componentname = $('#elc_name').val();        $.ajax({            type: "POST",            url: '<?php echo $this->mainconfig['host'] . 'master/get-component-same'; ?>',            data: {componentname: componentname}        }).done(function (data) {            if ((data != '')) {                alert("This Component name Exists");                $("#elc_name").val("");            }        });    });    $("#desig_name").change(function () {        var desig_name = $('#desig_name').val();        //alert(desig_name);        $.ajax({            type: "POST",            url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-designation'; ?>',            data: {desig_name: desig_name}        }).done(function (data) {            $('#designation_name').empty('');            $('#designation_name').append(data);        });    });    $("#department_name").change(function () {        var department_name = $('#department_name').val();        alert(department_name);        $.ajax({            type: "POST",            url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-department-name'; ?>',            data: {department_name: department_name}        }).done(function (data) {            $('#desig_name').empty('');            $('#desig_name').append(data);        });    });    $("#academic_year_id").change(function () {        var academic_id = $('#academic_year_id').val();        if (academic_id) {            $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-terms'; ?>',                data: {academic_year_id: academic_id}            }).done(function (data) {                //alert(data);                $('#term_id').empty('');                $('#term_id').html(data);                $('#term_id').trigger("chosen:updated");            });        }    });    var academic_year_id = $('#academic_year_id').val();    var emp_allotment = $('#emp_allotment').val();    //alert(academic_year_id);     if (emp_allotment) {        $.ajax({            type: "POST",            url: '<?php echo $this->mainconfig['host'] . 'master/ajax-employee-details-view'; ?>',            data: {academic_year_id: academic_year_id, emp_allotment: emp_allotment}        }).done(function (data) {             //alert(data);             $('#employeedata').empty('');                        $('#employeedata').append(data);        });    }    $('body').on('change', '#academic_year_id', function () {        var academic_id = $('#academic_year_id').val();        if (academic_id) {            $('#batch').show();            $('#batch_name').show();            $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-batch-code'; ?>',                data: {academic_id: academic_id}            }).done(function (data) {                var result = $.parseJSON(data);                if ((data != '')) {                    $('#batch').val(result['short_code']);                    $('#batch_name').val(result['batch_code']);                }            });        }    });    $('body').on('change', '#term_id', function () {        var academic_year_id = $('#academic_year_id').val();        var term_id = $('#term_id').val();        var emp_allotment = $('#emp_allotment').val();        var paraMeterTYpe = "<?php echo $this->type; ?>";    //    alert(paraMeterTYpe);        //alert(academic_year_id);                if (academic_year_id && term_id && paraMeterTYpe !='bulkadd' ) {            $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-employee-data-view'; ?>',                data: {academic_year_id: academic_year_id, emp_allotment: emp_allotment, term_id: term_id}            }).done(function (data) {                var result = $.parseJSON(data);                if (result != 0) {                    alert('This Batch is already Existed');                    $("#term_id").find('option').attr("selected", false);                    //alert(data);                    $('#batch').hide();                    $('#batch').val('');                    $('#batch_name').hide();                    $('#batch_name').val('');                    $("#employeedata").empty('');                } else {                    $.ajax({                        type: "POST",                        url: '<?php echo $this->mainconfig['host'] . 'master/ajax-employee-details-view'; ?>',                        data: {academic_year_id: academic_year_id, emp_allotment: emp_allotment, term_id: term_id}                    }).done(function (data) {                                                                       $('#employeedata').empty('');                        $('#employeedata').append(data);                    });                }            });        }    });    var academic_id = $('#academic_year_id option:selected').val();    if (academic_id) {        $('#batch').show();        $('#batch_name').show();        $.ajax({            type: "POST",            url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-batch-code'; ?>',            data: {academic_id: academic_id}        }).done(function (data) {            var result = $.parseJSON(data);            if ((data != '')) {                $('#batch').val(result['short_code']);                $('#batch_name').val(result['batch_code']);            }        });    } else {        $('#batch').hide();        $('#batch_name').hide();    }        $('body').on('click', '#GET', function () {        $('.load-box').css('display','block');         var academic_year_id = $('#academic_year_id').val();        var term_id = $('#term_id').val();        if (academic_year_id && term_id){          $.ajax({                        type: "POST",                        url: '<?php echo $this->mainconfig['host'] . 'master/ajax-previous-faculty-allotment'; ?>',                        data: {academic_year_id: academic_year_id, emp_allotment: emp_allotment, term_id: term_id}                    }).done(function (data) {                     $('#ajaxData').empty('');                        $('#ajaxData').html(data);                         $('.load-box').css('display','none');                    });        }            });    //To filter Session    $('body').on('change', '#academic_year', function () {        var year_id = $('#academic_year').val();        if (year_id) {            $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-Get-Session'; ?>',                data: {year_id: year_id}            }).done(function (data) {                $('#session').empty('');                $('#session').html(data);                $('#session').trigger("chosen:updated");            });        }    });      //End    //For FilterData     $('body').on('click', '#getRecords', function () {        var batch = $('#academic_year_id').val();        //alert(batch);        if (batch) {            $.ajax({                type: "POST",                url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-filter-record'; ?>',                data: {batch: batch}            }).done(function (data) {                $('#ajaxData').empty('');                $('#ajaxData').html(data);            });        }    });    //End//     $('body').on('change', '#stream', function () {//     var stream = $('#stream').val();//     if (stream) {//         $.ajax({//             type: "POST",//             url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-academic-on-stream'; ?>',//             data: {stream: stream}//         }).done(function (data) {//             $('#mig_academic_id').empty('');//             $('#mig_academic_id').html(data);//             $('#mig_academic_id').trigger("chosen:updated");//             $('#academic_year_id').empty('');//             $('#academic_year_id').html(data);//             $('#academic_year_id').trigger("chosen:updated");//         });//     }// });// $('body').on('change', '#mig_academic_id', function () {//         var mig_academic_id = $('#mig_academic_id').val();        //         var academic_year_id = $('#academic_year_id').val();//         //alert(academic_year_id);//         //alert(mig_academic_id);        //         if (Number(mig_academic_id) >  Number(academic_year_id) ) {           //             $.ajax({//                 type: "POST",//                 url: '<?php echo $this->mainconfig['host'] . 'master/ajax-get-terms'; ?>',//                 data: {academic_year_id: mig_academic_id}//             }).done(function (data) {//                 $('#mig_term_id').empty('');//                 $('#mig_term_id').html(data);//                 $("#mig_term_id").trigger("chosen:updated");//             });//         }else{//           $("#mig_academic_id").find('option:selected').attr("selected",null);//           $("#mig_academic_id").trigger("chosen:updated");//           alert('Migration Batch should be New Batch.');//         }                //     });//     $('body').on('change', '#mig_term_id', function () {//         let term_id = $('#term_id option:selected').text();//         let mig_term_id = $('#mig_term_id option:selected').text();        //         //alert(mig_term_id);//         if (mig_term_id ===  term_id) {//           //alert('I Love Smita.'); //         }else{//           $("#mig_term_id").find('option:selected').attr("selected",null);//           $("#mig_term_id").trigger("chosen:updated");//           alert('Term and Migration Term should be same.');            //         }//     });</script>
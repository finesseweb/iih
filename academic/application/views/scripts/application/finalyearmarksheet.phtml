<?php //echo "<pre>";print_r($this->elective);exit;    ?>
<?php
session_start();
?>
<style type="text/css">

    .bold-checkbox{
        position: absolute; top: 12px; font-weight:bold;
    }

    body.modal-open .supreme-container{
        display: none;


    }

</style>
<link rel="stylesheet" type="text/css" href="https://printjs-4de6.kxcdn.com/print.min.css">


<style>
    @media print {
        .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12 {
            float: left;
        }
        .col-sm-12 {
            width: 100%;
        }
        .col-sm-11 {
            width: 91.66666667%;
        }
        .col-sm-10 {
            width: 83.33333333%;
        }
        .col-sm-9 {
            width: 75%;
        }
        .col-sm-8 {
            width: 66.66666667%;
        }
        .col-sm-7 {
            width: 58.33333333%;
        }
        .col-sm-6 {
            width: 50%;
        }
        .col-sm-5 {
            width: 41.66666667%;
        }
        .col-sm-4 {
            width: 33.33333333%;
        }
        .col-sm-3 {
            width: 25%;
        }
        .col-sm-2 {
            width: 16.66666667%;
        }
        .col-sm-1 {
            width: 8.33333333%;
        }
        .col-sm-pull-12 {
            right: 100%;
        }
        .col-sm-pull-11 {
            right: 91.66666667%;
        }
        .col-sm-pull-10 {
            right: 83.33333333%;
        }
        .col-sm-pull-9 {
            right: 75%;
        }
        .col-sm-pull-8 {
            right: 66.66666667%;
        }
        .col-sm-pull-7 {
            right: 58.33333333%;
        }
        .col-sm-pull-6 {
            right: 50%;
        }
        .col-sm-pull-5 {
            right: 41.66666667%;
        }
        .col-sm-pull-4 {
            right: 33.33333333%;
        }
        .col-sm-pull-3 {
            right: 25%;
        }
        .col-sm-pull-2 {
            right: 16.66666667%;
        }
        .col-sm-pull-1 {
            right: 8.33333333%;
        }
        .col-sm-pull-0 {
            right: auto;
        }
        .col-sm-push-12 {
            left: 100%;
        }
        .col-sm-push-11 {
            left: 91.66666667%;
        }
        .col-sm-push-10 {
            left: 83.33333333%;
        }
        .col-sm-push-9 {
            left: 75%;
        }
        .col-sm-push-8 {
            left: 66.66666667%;
        }
        .col-sm-push-7 {
            left: 58.33333333%;
        }
        .col-sm-push-6 {
            left: 50%;
        }
        .col-sm-push-5 {
            left: 41.66666667%;
        }
        .col-sm-push-4 {
            left: 33.33333333%;
        }
        .col-sm-push-3 {
            left: 25%;
        }
        .col-sm-push-2 {
            left: 16.66666667%;
        }
        .col-sm-push-1 {
            left: 8.33333333%;
        }
        .col-sm-push-0 {
            left: auto;
        }
        .col-sm-offset-12 {
            margin-left: 100%;
        }
        .col-sm-offset-11 {
            margin-left: 91.66666667%;
        }
        .col-sm-offset-10 {
            margin-left: 83.33333333%;
        }
        .col-sm-offset-9 {
            margin-left: 75%;
        }
        .col-sm-offset-8 {
            margin-left: 66.66666667%;
        }
        .col-sm-offset-7 {
            margin-left: 58.33333333%;
        }
        .col-sm-offset-6 {
            margin-left: 50%;
        }
        .col-sm-offset-5 {
            margin-left: 41.66666667%;
        }
        .col-sm-offset-4 {
            margin-left: 33.33333333%;
        }
        .col-sm-offset-3 {
            margin-left: 25%;
        }
        .col-sm-offset-2 {
            margin-left: 16.66666667%;
        }
        .col-sm-offset-1 {
            margin-left: 8.33333333%;
        }
        .col-sm-offset-0 {
            margin-left: 0%;
        }
        .visible-xs {
            display: none !important;
        }
        .hidden-xs {
            display: block !important;
        }
        table.hidden-xs {
            display: table;
        }
        tr.hidden-xs {
            display: table-row !important;
        }
        th.hidden-xs,
        td.hidden-xs {
            display: table-cell !important;
        }
        .hidden-xs.hidden-print {
            display: none !important;
        }
        .hidden-sm {
            display: none !important;
        }
        .visible-sm {
            display: block !important;
        }
        table.visible-sm {
            display: table;
        }
        tr.visible-sm {
            display: table-row !important;
        }
        th.visible-sm,
        td.visible-sm {
            display: table-cell !important;
        }
        #non-printable { display: none; }
        #printable { display: block; } 

        .printdiv:last-child {
            page-break-inside: avoid;
        }
    }
    @page 
    {
        size:  auto;   /* auto is the initial value */
        margin: 0mm;  /* this affects the margin in the printer settings */
    }



    #custom_data_records{
        width:100%;
        text-align: right;
        font-size:1.5em;

    }

    .load-box{
        display:none;
        position:absolute;
        width:100%;
        height:100%;
        background:rgba(146,40,46,.5);
        z-index: 999;
    }

    .load-box>img{
        position:absolute;
        top:50%;
        left:50%;
        width:40em;
        transform: translate(-50%,-50%);


    }
    #incorrect,#redirect{
        display:none;
    }


    .right_col{
        position:absolute;
        border-radius:1em;
        width: 100%;
        height: auto;
        background:#fff;
        box-shadow:2px 2px 5px #000;
        padding:1em;
    }
    .panel-body{
        
}
    .aestric{
        color: red;
    }

</style>
<!-- <link href="<?php echo $this->mainconfig['publicpath']; ?>css/custom.css" rel="stylesheet"> -->
<div class="right_col" >
    <form class="no-margin" id="formValidate1" action="<?= $this->mainurl ?>application/finalyearmarksheet/" method="post" data-validate="parsley"  enctype="multipart/form-data">



        <div class="col-md-12 col-sm-12 col-xs-12">
            <center><img src="https://pwcadmissions.in/academic/public/images/img.png" alt="..." class="profile_img"></center>
            <h2 style="text-align: center;">PATNA WOMEN'S COLLEGE </h2>
            <h3 style="text-align: center;">Autonomous  </h3>
            <h4 style="text-align: center;">(PATNA  UNIVERSITY) </h4>
        </div>
        
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class = "panel panel-default">
                    <div class="container-fluid panel-header">

                        <h4 class="text-center"><u><b >Download Cumulative Marksheets</b></u></h4>

                    </div>
                    <div class="panel-body">
                    <div class="col-sm-2 col-md-2 col-xs-2"></div>
                    <div class="col-sm-8 col-md-8 col-xs-8">
                    
                        <div class="form-group">
                            <label class="control-label">Academic Year<span class="aestric">*</span></label>
                            <?php echo $this->form->academic_year; ?>

                            </select>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Session<span class="aestric">*</span></label>
                            <?php echo $this->form->session; ?>
                            <input type="hidden" class="form-control" name="years" id="years"  autocomplete="off">
                            <input type="hidden" class="form-control" name="cmn_terms" id="cmn_terms"  autocomplete="off">
                       
                        </div>
                        <div class="form-group">
                            <label class="control-label">Student type<span class="aestric">*</span></label>
                            <?php echo $this->form->stu_type; ?>
                        </div>

                       
                        <div class="form-group">
                            <label class="control-label">Batch<span class="aestric">*</span></label>
                            <select class="form-control chosen-select" name="academic_id" id="academic_id"  required="required">
                                <option value="">Select Batch</option>

                            </select>
                        </div>
                      <!--  <div class="form-group">
                            <label class="control-label">Semester <span class="aestric">*</span></label>
                            <select class="form-control chosen-select" name="term" id="term" required="required">
                                <option value="">Select Semester</option>
                            </select>
                        </div>-->

                        <div class="form-group">
                            <label class="control-label">Form id <span class="aestric">*</span></label>
                            <input type="text" class="form-control" id="app_id" name="app_id" pattern ="F-\d{1,4}-\d{1,}" />
                            <div class="form-control-static">
                                <span class="text-info">Format should be: F-XXXX-XXX</span><br/>
                                <span class="text-danger" id="incorrect">Incorect format..</span>
                                <span class="text-success" id="redirect">Redirecting...</span>
                            </div>

                        </div>
                        <div class="form-group">
                        <input type="submit" id="sbmbtn" class="btn-primary btn-lg" name="submit">
                        <button class="btn btn-info pull-right btn-lg" data-toggle="modal" id="openMyModal" data-target="#myModal">know Your Batch</button>
                        </div>

                    </div>

                 
                    <div class="col-sm-2 col-md-2 col-xs-2 "></div>
                    
                    </div>
              

            </div>


</div>
<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">

            <div class="modal-body" >
                <div class="form-group">
                    <label class="control-label">Form id <span class="aestric">*</span></label>
                    <input type="text" class="form-control" name="formId" id="formId" pattern ="F-\d{1,4}-\d{1,}" placeholder="Format should be: F-XXXX-XXX" />
                    <div class="form-control-static" id="resultas">
                        <span class="text-info"></span><br/>
                    </div>

                </div>
            </div>
            <div class="modal-footer">

                <button type="button" id="" data-dismiss="modal" class="btn btn-default">Cancel</button>
                <button type="button" id="getBatch" class="btn btn-primary">Get Batch</button>
            </div>
        </div>

    </div>
</div>
    </form>
</div>
<!---End Modal--->
<script type="text/javascript">
    $('#getMarksheet').click(function () {
        var x = $('input').val();
        var cmn_terms = $('#term').val();
        var matchpat = /F-\d{4}-\d{1,}$/g;
        var res = x.match(matchpat);
        var stu_type = $('#stu_type').val();
        if (res) {
            $('#redirect').show();
            $('#incorrect').hide();
            //  var result = MD5(res); normal word
// var result = MD5(unescape(encodeURIComponent(res)));
            var result = encrypt(res);
            if (stu_type == 2) {
                window.location.replace("<?= $this->mainurl ?>application/student-back-term-report/stu_id/" + result + "/term/" + cmn_terms);
            } else {

                window.location.replace("<?= $this->mainurl ?>application/student-term-report/stu_id/" + result + "/term/" + cmn_terms);
            }

        } else {
            $('#redirect').hide();
            $('#incorrect').show();
        }
    });
//To filter Session
    $('body').on('change', '#academic_year', function () {
        $('#department').removeAttr('disabled');
        var year_id = $('#academic_year').val();
        if (year_id) {

            $.ajax({
                type: "POST",
                url: '<?php echo $this->mainconfig['host'] . 'application/ajax-Get-Session'; ?>',
                data: {year_id: year_id}
            }).done(function (data) {
                $('#session').empty('');
                $('#session').html(data);
                $('#session').trigger("chosen:updated");
            });
        }
    });
    //End
//Get Batch By Session
    $('body').on('change', '#session', function () {
     
        $("#stu_type").val('');
            $("#stu_type").find("option:selected").removeAttr("selected");
            
           $("#academic_id").empty('');
           // $("#academic_id").find("option:selected").removeAttr("selected");  
            $('#academic_id').trigger("chosen:updated");
    });
    $('body').on('change', '#stu_type', function () {
        var id = $('#stu_type').val();
        var session= $('#session').val();
        var cmn_terms= $('#cmn_terms').val();
        if (id) {

            $.ajax({
                type: "POST",
                url: '<?php echo $this->mainconfig['host'] . 'application/ajax-get-active-batch'; ?>',
                data: {type: id,session:session,cmn_terms:cmn_terms}
            }).done(function (data) {
                $('#academic_id').empty('');
                $('#academic_id').html(data);
                $('#academic_id').trigger("chosen:updated");
            });
        }
    });
    
    $('body').on('change', '#academic_id', function () {
        var id = $('#academic_id').val();
        var type = $('#stu_type').val();
        if (id) {

            $.ajax({
                type: "POST",
                url: '<?php echo $this->mainconfig['host'] . 'application/ajax-get-active-term'; ?>',
                data: {batch_id: id, exam_type: type}
            }).done(function (data) {
                $('#term').empty('');
                $('#term').html(data);
                $('#term').trigger("chosen:updated");
            });
        }
    });
//End

    $("#openMyModal").click(function () {
        $('#resultas').empty('');
    });
    $("#getBatch").click(function () {
        let formId = $("#formId").val();
        if (formId) {
            $.ajax({
                type: "POST",
                url: '<?php echo $this->mainconfig['host'] . 'application/ajax-get-batch-info'; ?>',
                data: {formId: formId}
            }).done(function (data) {
                //alert(data);
                $('#resultas').empty('');
                $('#resultas').html(data);
            });
        } else {
            alert('Please Enter Your Form Id.')
        }
//$("#resultas").append(application_no);      
    });
   
</script>

<script type="text/javascript">
    $("#session").change( function () {
        //Get text or inner html of the selected option
        var selectedText = $("#session option:selected").html();
        var arr = selectedText.split("-")
        var discount=arr[1]-arr[0];
        $('#years').val(discount);
        if(discount===3){
            var term='t6';
        }else if(discount===2){
             var term='t4';
        }
        else {
            var term='t2';
        }
        $('#cmn_terms').val(term);
    });
    
 $('#sbmbtn').click(function () {   
  var sess= $("#session").val();  
  var acady=$("#academic_year").val();  
  var stu=$("#stu_type").val();  
  var acad=$("#academic_id").val();
  var stu_id=$("#app_id").val();
  
  if(sess==''){
      alert('Session is Reqired');
      return false;
  }
  else if (acady==''){
      alert('Aademic Year is Reqired');
      return false; 
  }
  else if (stu==''){
      alert('Student type is Reqired');
      return false; 
  }
  else if (acad==''){
      alert('Batch is Reqired');
      return false; 
  }
  else if (stu_id==''){
      alert('From Id is Reqired');
      return false; 
  }
  else {
      return true;
  }
 });
</script>






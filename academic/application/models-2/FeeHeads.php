<?php/**  * @Framework Zend Framework * @Powered By TIS  * @category   ERP Product * @copyright  Copyright (c) 2014-2015 Techintegrasolutions Pvt Ltd. * (http://www.techintegrasolutions.com) *	Authors Kannan and Rajkumar */class Application_Model_FeeHeads extends Zend_Db_Table_Abstract{    public $_name = 'erp_fee_heads_master';    protected $_id = 'feehead_id';      //get details by record for edit	public function getRecord($id)    {               $select=$this->_db->select()                      ->from($this->_name)                      ->where("$this->_name.$this->_id=?", $id)				   					  ->where("$this->_name.status !=?", 2);					          $result=$this->getAdapter()                      ->fetchRow($select);        //print_r($result);die;					          return $result;    }        	public function getRecordbydegree($id,$cat_id,$session)    {               $select=$this->_db->select()                      ->from($this->_name)                      ->where("$this->_name.degree_id=?", $id)				                           ->where("$this->_name.feecategory_id=?", $cat_id)	                        ->where("$this->_name.session_id=?", $session)						  ->where("$this->_name.status !=?", 2);        $result=$this->getAdapter()                      ->fetchAll($select);        //print_r($result);die;					          return $result;    }		//Get all records	public function getRecords()    {               $select=$this->_db->select()                      ->from($this->_name)						->joinleft(array("cat"=>"erp_fee_category_master"),"cat.category_id=$this->_name.feecategory_id",array("category_name"))					  ->where("$this->_name.status !=?", 2)->group(array("$this->_name.session_id","$this->_name.feecategory_id"))					  ->order("$this->_name.$this->_id DESC");        $result=$this->getAdapter()                                          ->fetchAll($select);                  return $result;    }	//View purpose		public function getFeeheads($degree_id='',$session = 0,$dept_type=0,$cat_id='')	{        $select = $this->_db->select();		    $select->from($this->_name);			$select->where("$this->_name.status!=?",2);            $select->where("$this->_name.degree_id =?",$degree_id);            if($session){               $select->where("$this->_name.session_id = ?",$session);               $select->where("$this->_name.dept_id=?", $dept_type);            }      //            else{//            $select->where("$this->_name.session_id = ?",0);//            }            if(!empty($cat_id))            $select->where("$this->_name.feecategory_id = ?",$cat_id);             		$select->order('feehead_id  ASC');        //echo $select;DIE;        $result = $this->getAdapter()->fetchAll($select);        return $result;     }		public function getFeehead_ids($feecategory_id)	{        $select = $this->_db->select()		    ->from($this->_name,array("feehead_id"))			//->joinleft(array("cat"=>"erp_fee_category_master"),"cat.category_id=$this->_name.feecategory_id",array("category_name","category_id"))			//->joinleft(array("feehead_items"=>"erp_fee_heads_items"),"feehead_items.feehead_id=$this->_name.feehead_id",array("feehead_name"))			->where("$this->_name.status!=?",2)			->where("$this->_name.feecategory_id=?",$feecategory_id);			//->order('feecategory_id  ASC');	   //echo $select;die;        $result = $this->getAdapter()->fetchAll($select);		//echo'<pre>';print_r($result);die;        return $result;     }  }?>
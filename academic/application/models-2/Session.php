<?phpclass Application_Model_Session extends Zend_Db_Table_Abstract {    public $_name = 'session_info';    protected $_id = 'id';    public function getRecord($id) {        $select = $this->_db->select()                ->from($this->_name)                ->where("$this->_name.$this->_id =?", $id);               // ->where("status=?",0);        $result = $this->getAdapter()                ->fetchRow($select);        return $result;    }    public function getSessionRecordByYearId($year_id){        $select = $this->_db->select()                ->from($this->_name)             ->where('acad_year_id=?',$year_id)             ->where('status=?',0);        $result = $this->getAdapter()                ->fetchAll($select);        return $result;    }    public function getTotalEnrollments($department,$session){  $select=$this->_db->select()                     ->from("applicant_payement_details",array("count(*) as total_students"))                      ->join(array("applicant_course_details"=>"applicant_course_details"),"applicant_course_details.course = applicant_payement_details.course and applicant_course_details.form_id = applicant_payement_details.form_id",array())                       ->join(array("department_type"=>"department_type"),"department_type.id=applicant_payement_details.course",array("department_type"))                       ->join(array("academic_master"),"academic_master.academic_year_id = applicant_course_details.core_course1",array())                       ->join(array("department"=>"department"),"department.id = academic_master.department",array("department.short_code"))                      ->where("applicant_payement_details.roll_no !=?", 0)                      ->where("applicant_payement_details.payment_status !=?", 0)                       ->where("applicant_payement_details.course =?", $department)                     //==============[for temporary Purpose]==========//                     // ->where("$this->_name.id =?", $session)                      ->group("applicant_payement_details.course");					  //->where("$this->_name.status !=?", 2);                   //  echo $select;die;        $result=$this->getAdapter()                      ->fetchRow($select);                                          return   isset($result['total_students'])?$result:$this->getTotalPgsEnrollments($department,$session);}public function getTotalPgsEnrollments($department,$session){        $select=$this->_db->select()                     ->from("applicant_payement_details",array("count(*) as total_students"))                      ->join(array("applicant_course_details"=>"applicant_course_details"),"applicant_course_details.course = applicant_payement_details.course and applicant_course_details.form_id = applicant_payement_details.form_id",array())                       ->join(array("department_type"=>"department_type"),"department_type.id=applicant_payement_details.course",array("department_type","department_type as short_code"))                      ->where("applicant_payement_details.roll_no !=?", 0)                      ->where("applicant_payement_details.payment_status !=?", 0)                       ->where("applicant_payement_details.course =?", $department)                     //==============[for temporary Purpose]==========//                     // ->where("$this->_name.id =?", $session)                      ->group("applicant_payement_details.course");					  //->where("$this->_name.status !=?", 2);                     //echo $select;die;        $result=$this->getAdapter()                      ->fetchRow($select);                       return $result;    }public function getTotalEnrollmentsallcourse($department,$session){  $select=$this->_db->select()                      ->from("applicant_payement_details",array("count(*) as total_students"))                      ->join(array("applicant_course_details"=>"applicant_course_details"),"applicant_course_details.course = applicant_payement_details.course and applicant_course_details.form_id = applicant_payement_details.form_id",array())                       ->join(array("department_type"=>"department_type"),"department_type.id=applicant_payement_details.course",array("department_type"))                       ->join(array("academic_master"),"academic_master.academic_year_id = applicant_course_details.core_course1",array())                       ->join(array("department"=>"department"),"department.id = academic_master.department",array("department.short_code"))                      ->where("applicant_payement_details.roll_no !=?", 0)                      ->where("applicant_payement_details.payment_status !=?", 0)                       ->where("applicant_payement_details.course =?", $department)                     //==============[for temporary Purpose]==========//                     // ->where("$this->_name.id =?", $session)                      ->group(array("department.id"));					  //->where("$this->_name.status !=?", 2);        $result=$this->getAdapter()                      ->fetchAll($select);         return  isset($result[0]['total_students'])?$result:$this->getTotalPgsEnrollmentsAllCourses($department,$session);}public function getTotalPgsEnrollmentsAllCourses($department,$session){     $select=$this->_db->select()                     ->from("applicant_payement_details",array("count(*) as total_students"))                      ->join(array("applicant_course_details"=>"applicant_course_details"),"applicant_course_details.course = applicant_payement_details.course and applicant_course_details.form_id = applicant_payement_details.form_id",array())                       ->join(array("department_type"=>"department_type"),"department_type.id=applicant_payement_details.course",array("department_type"))                       ->join(array("department"=>"department"),"department.department_type = department_type.id",array("department.short_code"))                      ->where("applicant_payement_details.roll_no !=?", 0)                      ->where("applicant_payement_details.payment_status !=?", 0)                       ->where("applicant_payement_details.course =?", $department)                     //==============[for temporary Purpose]==========//                     // ->where("$this->_name.id =?", $session)                      ->group("applicant_payement_details.course");					  //->where("$this->_name.status !=?", 2);        $result=$this->getAdapter()                      ->fetchAll($select);                       return $result;}    public function getRecords() {        $select = $this->_db->select()                ->from($this->_name,array("id","session", "created_date", "last_modified_date", "status as session_status", "acad_year_id", "inactive_status", "tc_status"))                       ->joinleft(array("academic_year"),"academic_year.year_id=$this->_name.acad_year_id");                    $result = $this->getAdapter()                ->fetchAll($select);        return $result;    } public function getTcRecords() {        $select = $this->_db->select()                ->from($this->_name,array("id"))                          ->where("$this->_name.tc_status=?",'yes');        $result = $this->getAdapter()                        ->fetchAll($select);        return $result;    }    public function getSession($name) {        $select = $this->_db->select()                ->from($this->_name)                ->where('session like ?',trim($name));//echo "<prE>".$select;exit;        $result = $this->getAdapter()                ->fetchAll($select);        return $result;    }            public function getActiveRecords() {        $select = $this->_db->select()                ->from($this->_name)                ->where('status=?',0);                    $result = $this->getAdapter()                ->fetchAll($select);        return $result;    }            	public function getDropDownList(){        $select = $this->_db->select()		->from($this->_name, array('id','session'))								->where("status =?",0)                ->order('id  ASC');        $result = $this->getAdapter()->fetchAll($select);        $data = array();		$st_year ='';		$end_year='';        foreach ($result as $val) {			//==============[changed due to data is comming from excel as text]========================//			$data[$val['id']] = $val['session'];        }        return $data;    }    	public function getDropDownListforExcel(){        $select = $this->_db->select()		->from($this->_name, array('id','session'))								->where("status =?",0)                ->order('id  ASC');        $result = $this->getAdapter()->fetchAll($select);        $data = array();		$st_year ='';		$end_year='';        foreach ($result as $val) {			$data[$val['session']] = $val['session'];        }        return $data;    }                }
<?php/**  * @Framework Zend Framework * @Powered By TIS  * @category   ERP Product * @copyright  Copyright (c) 2014-2015 Techintegrasolutions Pvt Ltd. * (http://www.techintegrasolutions.com) *	Authors Kannan and Rajkumar */class Application_Model_AddonReferenceGradeItems extends Zend_Db_Table_Abstract{    public $_name = 'addon_reference_grade_items';    protected $_id = 'reference_item_id';      //get details by record for edit	public function getRecords($reference_id)    {               $select=$this->_db->select()                      ->from($this->_name)                      ->where("$this->_name.reference_id=?", $reference_id);				   					         $result=$this->getAdapter()                      ->fetchAll($select);  					          return $result;    }	public function getRecordsByNumgrade($numgrade,$academic_year='',$addon_id='')    {               $select=$this->_db->select()                      ->from($this->_name,array('marks_from','marks_to'))                      ->joinLeft(array("ref_master"=>"addon_reference_grade_master"),"ref_master.reference_id=$this->_name.reference_id",array(""))                      ->where("$this->_name.number_grade=?", $numgrade)	                      ->where("ref_master.academic_year=?", $academic_year)                      ->where("ref_master.addon_course_list=?", $addon_id);				           $result=$this->getAdapter()                      ->fetchRow($select);  					          return $result;    }public function getRecordsByAcademicId($academic_year_id ,$addon_id = '')    {               $error_model = new Application_Model_Error();        empty($academic_year_id)?$error_model->err('$degree_id is empty on '.__LINE__.' : on'.__FILE__):'';        $select=$this->_db->select()            ->from($this->_name)            ->joinLeft(array("ref_master"=>"addon_reference_grade_master"),"ref_master.reference_id=$this->_name.reference_id",array("academic_year"))            ->where("ref_master.academic_year=?", $academic_year_id)            ->where("ref_master.addon_course_list=?", $addon_id)            ->where("ref_master.status !=?", 2);				               $result=$this->getAdapter()            ->fetchAll($select);               return $result;    } 	        public function getRecordByNumGrade($num,$deg='',$addon_id=''){               if($num){            $select=$this->_db->select()                      ->from($this->_name,array('letter_grade'))                      ->joinLeft(array("ref_master"=>"addon_reference_grade_master"),"ref_master.reference_id=$this->_name.reference_id",array(""))                      ->where("$this->_name.marks_from <=?", round($num))	                      ->where("ref_master.academic_year =?", $deg)	                    ->where("ref_master.addon_course_list =?", $addon_id)                      ->where("$this->_name.marks_to >=?", round($num));        $result=$this->getAdapter()                              ->fetchRow($select);         //echo $select;die;       return $result['letter_grade'];} else {     return 'F';}                 }          public function getRecordByNumGrade1($num,$deg='',$session=''){               if($num){            $select=$this->_db->select()                      ->from($this->_name,array('letter_grade','des'))                      ->joinLeft(array("ref_master"=>"reference_grade_master"),"ref_master.reference_id=$this->_name.reference_id",array(""))                      ->where("$this->_name.marks_from <=?", round($num))	                      ->where("ref_master.degree_id =?", $deg)                      ->where("ref_master.session =?", $session)                      ->where("$this->_name.marks_to >=?", round($num));                //echo $select;    die();        $result=$this->getAdapter()                      ->fetchRow($select);        return $result;} else {$result['letter_grade'] = 'F';$result['des'] = 'Fail';     return $result;}                 }                    public function getRecordByDegId($deg='',$session=''){                   $select=$this->_db->select()                      ->from($this->_name,array('letter_grade','des',"number_grade","marks_to","marks_from"))                      ->joinLeft(array("ref_master"=>"reference_grade_master"),"ref_master.reference_id=$this->_name.reference_id",array(""))	                      ->where("ref_master.degree_id =?", $deg)	                      ->where("ref_master.session =?", $session)                    ->order('number_grade desc');        $result=$this->getAdapter()                      ->fetchAll($select);        return $result;                 }    		public function trashItems($reference_id) {        $this->_db->delete($this->_name, "reference_id=$reference_id");		}			}?>
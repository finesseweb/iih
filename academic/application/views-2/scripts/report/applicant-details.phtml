<style>
@page {
  size: A4;
  margin: 11mm 17mm 17mm 17mm;
}

@media print {
  .footer {
    position: fixed;
    bottom: 0;
  }
.header{
            text-align: center;
            height: 20px;
            position:fixed;
            margin:0px;
            top:0px;
        }
  .content-block, p {
    page-break-inside: avoid;
  }

  html, body {
    width: 210mm;
    height: 297mm;
  }

</style>
<div class="right_col bdoypayment">
    <div class="load-box">
        <img src="<?php echo $this->mainconfig['publicpath']; ?>/images/loader.gif" width='200px'  class="loder_img1" />
    </div>
    <div class="panel panel-default">
        <div class="row">
            <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
                <h3 class="page-title txt-color-blueDark">
                    <i class="fa fa-bars">Entrance Attendance sheets</i>

                </h3>
            </div>
        </div>
        <div class="panel-body cont">
           
                <div class="x_title">
                   					<div class="row">
                                            <div class="col-sm-3">
                            <div class="form-group">
                              <label class="control-label">Session<span class="asterisk">*</span></label>
                                <?php echo $this->form->session; ?>
                            </div>
							</div>	
                                            <div class="col-sm-3">
                            <div class="form-group">
                              <label class="control-label">Degree<span class="asterisk">*</span></label>
                                <?php echo $this->form->degree_id; ?>
                            </div>
							</div>	
							<div class="col-sm-3">
                            <div class="form-group">
                                 <label class="control-label">Course Category<span class="asterisk">*</span></label>
<select name="cc_id" id="cc_id" class="form-control chosen-select" required="required" >
   <option value='0'>Core course</option>
   <option value='1'>others</option>
</select>
</div>
</div>
                                                            <div class="col-sm-3">
                            <div class="form-group">
                                 <label class="control-label">col/Non-col<span class="asterisk">*</span></label>
<select name="col" id="col" class="form-control chosen-select" required="required" >
   <option value='1'>collegiate</option>
   <option value='2'>Non - Collegiate</option>
</select>
</div>
</div>

						<div class="col-sm-12">

                            <div class="form-group">

                              <label class="control-label">Batch<span class="asterisk">*</span></label>

                                <?php echo $this->form->academic_year_id; ?>

                            </div>

							</div>	
                                           
							</div>

							<div class="row">
                                                               
                                                             <div class="col-sm-3">

							<div class="form-group">

							<label class="control-label">Term<span class="asterisk">*</span></label>

							<?php echo $this->form->term_id; ?>

							</div>

							</div>

							<div class="col-sm-3">
							<div class="form-group">
							<label class="control-label">Courses<span class="asterisk">*</span></label>
							<?php echo $this->form->course_id; ?>
							</div>
							</div>
                                                         
					</div>
					<div class="row" id ="custom-range">
		<div class="col-md-12" >
		    <div class="col-md-6 pull-left" style="padding-left : 0 ; margin-left: 0;"> 
		    <div class="col-md-3 pull-left"  style="padding-left : 0 ; margin-left: 0;"><p>MinSerial <input type ="number" id ="min"  /> </p></div>
		    <div class="col-md-3"><p>MaxSerial<input type ="number" id = "max" /></p></div>
		    </div>
		    <div class="col-md-6 pull-right">
       <button class= 'btn btn-primary pull-right' id ="printA">print</button>
       </div>
       </div><br/>
					</div>
                <div  id="studentData"> 
                    <table class="table table-striped table-bordered mb30 jambo_table bulk_action "
        id="dataTable">
        <thead>
            <tr>
              <th>S.No.</th>
                <th>Form Id</th>
                <th style="width: 15em">Student Name</th>
                <th>Exam Roll No.</th>
                <th>Registration No</th>
                <th>Copy Number</th>
                <th>Student Signature</th>
                <th>Invigilator Signature</th>
                <th  style="width: 50px;">Photo</th>
            </tr>
        </thead>
        <tbody>
            <?php
            $i = 1;

            if (count($this->paginator) != 0) {

                foreach ($this->paginator as $results) {
                   //echo "<pre>";print_r($results);die;
                    ?>
                    <tr>
                        <td><?php echo $i;

                    $i++;
                    ?>
                        </td>						

                        <td><?php echo $results['stu_id']; ?></td>
                        <td><?php echo $results['stu_fname']; ?></td>
                        <td><?php echo $results['exam_roll']; ?></td>
                        <td><?php echo $results['reg_no']; ?></td>
                        <td ></td>
                        <td></td>
                        <td></td>
                        <td><img class="img img-rounded"  src="<?php echo $this->mainconfig['host'] . $results['filename']; ?>" width="100px" height="70px" alt="img"></td>

                    </tr>            

                <?php
                } 
            }
            ?>

        </tbody>
</table>
                </div>
                </div>
            </div>
        </div>
    <div class='panel-footer'>
         
        
    </div>
        </div>    
<script>
    $('body').on('change', '#cc_id,#degree_id', function () {
 $('.load-box').css('display','block');
        var cc_id = $('#cc_id').val();
        if (cc_id=='0') {
             $('#academic_year_id>option').each(function(){
                            $(this).attr('selected',false);
                        });
                         $('#academic_year_id').select2();
             $('.load-box').css('display','none');
            
        }
 $('.load-box').css('display','none');
    });
</script>


<script>

$(document).ready(function() {		

	//$("#stu_dob").datepicker({ dateFormat: 'dd-mm-yy' });  

	$('#stu_dob').datepicker( {format: 'dd-mm-yyyy'} );

}); 





	function ConfirmDelete()

	{

	var x = confirm("Are you sure you want to delete?");

	if(x)

		return true;

	else

		return false;

	}

	

	

 

$('body').on('change', '#academic_year_id', function() {		

var academic_id=$('#academic_year_id').val();

   if(academic_id){

   $('#batch').show();

	$.ajax({ 

			type: "POST",

			url:'<?php echo $this->mainconfig['host'].'master/ajax-get-batch-code';?>',

			data: {academic_id:academic_id}

		}).done(function( data ) {

			var result = $.parseJSON(data);

			if((data!='')){

				$('#batch').val(result['short_code']);

			}

	  });

	 } 

 }); 

$('body').on('change', '#degree_id,#cc_id', function() {		

var degree_id=$('#degree_id').val();
var session=$('#session').val();

   if(degree_id){

	$.ajax({ 

			type: "POST",

			url:'<?php echo $this->mainconfig['host'].'elective/ajax-get-academics';?>',

			data: {degree_id:degree_id,session_id:session}

		}).done(function( data ) {

			var result = $.parseJSON(data);
                        $('#academic_year_id>option').each(function(){
                            $(this).removeAttr('selected');
                        });
                        
			if((data!='')){
			    if($('#cc_id').val() != 0){
                                for(index in result){
                                 $('#academic_year_id>option[value="'+result[index]['academic_year_id']+'"]').prop('selected',true) ;
                                }
			    }
                              
			}
                    $('#academic_year_id').select2();

	  });

	 } 

 }); 

 

var academic_id=$('#academic_year_id').val();

   if(academic_id){

   $('#batch').show();
                                    var data = '<?=!empty($this->term_id)?$this->term_id:'';?>';
                                  if(data){
                                    var patt = /\d$/g;
                                    var prev_val = parseInt(data.match(patt))-1;
                                    var patt = /(<?=!empty($this->term_id)?$this->term_id:'';?>)/;
                                    data = data.replace(patt,'t'+prev_val);
                                    
                                   $('#term_id').val(data);
                                   $('#term_id').trigger('chosen:updated');
                                   var term_id = data;
                                   
                                   $('#term_id2>option').show();
                                    $('#term_id2>option[value="'+term_id+'"]').hide();
                                    $('#term_id2>option[value="'+term_id+'"]').next().prop('selected',true);
                                    var term2 = $('#term_id2').val();
                                      if((academic_id) && (term_id)){
                                            $.ajax({ 
                                                            type: "POST",
                                                            url:'<?php echo $this->mainconfig['host'].'elective/ajax-get-course';?>',
                                                            data: {academic_year_id:academic_id,term_id : term_id}
                                                    }).done(function( data ) {
                                                        $('#course_id').html(data);
                                                        $('#course_id').trigger('chosen:updated');

                                                       if(term2){ 
                                                        $.ajax({ 
                                                            type: "POST",
                                                            url:'<?php echo $this->mainconfig['host'].'elective/ajax-get-course';?>',
                                                            data: {academic_year_id:academic_id,term_id : term2}
                                                    }).done(function( data ) {
                                                        var patt = /(<?=$this->course_id;?>)_(\d+)_(\d+)/g;
                                                        var prev_val = data.match(patt);
                                                        data = data.replace(patt,'<?=!empty($this->course_id)?$this->course_id:'';?>');
                                                          $('#course_id2').html(data);
                                                          $('#course_id2').val('<?=$this->course_id;?>');
                                                          $('[value="<?=$this->course_id;?>"]').attr('value',prev_val);
                                                          $('#course_id2').trigger('chosen:updated');
                                                        });
                                                        }  
                                              });
                                            }
                                   
                                   
                                   

                                        
                                            $.ajax({ 
                                            type: "POST",
                                            url: '<?php echo $this->mainconfig['host'].'elective/ajax-get-students1';?>',
                                            data: {academic_year_id:academic_id} 
                                                   }).done(function( data ) {
                                           x = JSON.parse('<?=$this->student_ids;?>');
                                           if(x){
                                            $('#selected_student').html(data);
                                            var i = 0;
                                           for(arr in x){
                                               $('option[value="'+x[arr]+'"]').prop('selected',true);
                                               i++;
                                           }
                                                $('#selected_student').select2();
                                                $('#selected_student').trigger('refresh');
                                                    $('#selected_student').parent().append('<div class="form-control-static pull-right" id="count" style="font-size:1.6em;"><strong>'+(i-3)+' : Selected Students</strong></div>')  
                                           }
                                    });
			
                }
	 
	 }

	else{

$('#batch').hide();

}



$('body').on('change','#academic_year_id,#course_id',function () { 
  $('.load-box').css('display','block');
var academic_year_id = $('#academic_year_id').val();  
var term_id = $('#term_id').val();

var course_id = $('#course_id').val();


if((academic_year_id) && (term_id) ){
                                    $.ajax({ 
                                            type: "POST",
                                            url: '<?php echo $this->mainconfig['host'].'report/ajax-get-student-by-dept';?>',
                                            data: {academic_year_id:academic_year_id,term_id : term_id,course_id:course_id,cc_id : $('#cc_id').val(),col:$('#col').val(),course_code: $('#course_id option:selected').text()} 
                                                   }).done(function( data ) {
                                                       $('#studentData').empty();
                                                       $('#studentData').html(data);
                                                         $('.load-box').css('display','none');   
                                    });
                                    
                                    }
                                    else
                                    {
                                        $('.load-box').css('display','none');    
                                    }
});

// 

$('body').on('change', '#term_id', function() {	

var academic_year_id = $('#academic_year_id').val();
var term_id = $(this).val();
$('#term_id2>option').show();
$('#term_id2>option[value="'+term_id+'"]').hide();
$('#term_id2>option[value="'+term_id+'"]').next().prop('selected',true);
var term2 = $('#term_id2').val();
   if((academic_year_id) && (term_id) ){
	$.ajax({ 
			type: "POST",
			url:'<?php echo $this->mainconfig['host'].'elective/ajax-get-course';?>',
			data: {academic_year_id:academic_year_id,term_id : term_id,cc_id : $('#cc_id').val(),col:$('#col').val(),course_code: $('#course_id option:selected').text()}
		}).done(function( data ) {
                    $('#course_id').html(data);
                    $('#course_id').trigger('chosen:updated');
                    
                   if(term2){ 
                    $.ajax({ 
			type: "POST",
			url:'<?php echo $this->mainconfig['host'].'elective/ajax-get-course';?>',
			data: {academic_year_id:academic_year_id,term_id : term2}
		}).done(function( data ) {
                    $('#course_id2').html(data);
                    $('#course_id2').trigger('chosen:updated');
                    });
                    }  
	  });
   }

 }); 
$('body').on('change', '#term_id2', function() {	

var academic_year_id = $('#academic_year_id').val();
var term_id = $(this).val();
$('#term_id>option').show();
$('#term_id>option[value="'+term_id+'"]').hide();

   if((academic_year_id) && (term_id) ){
	$.ajax({ 
			type: "POST",
			url:'<?php echo $this->mainconfig['host'].'elective/ajax-get-course';?>',
			data: {academic_year_id:academic_year_id,term_id : term_id}
		}).done(function( data ) {
                    $('#course_id2').html(data);
                    $('#course_id2').trigger('chosen:updated');

	  });
   }

 }); 




 $('#print').click(function(){

window.print('#grade_data');

});
      function onStudentSelect() {
        var op_list = $('#selected_student').find("option:selected");
        var str = "";
        $(op_list).each(function () {
            str += $(this).text() + "<br/>";
        });
      $('#selected_student').next('div').html(str);
    }
    $(document).ready(function () {
        onStudentSelect();
      onAcademicSelect();
    });
    
    
 $('#selected_student').select2();
      function onAcademicSelect() {
        var op_list = $('#academic_year_id').find("option:selected");
        var str = "";
        $(op_list).each(function () {
            str += $(this).text() + "<br/>";
        });
      $('#academic_year_id').next('div').html(str);
    }
     $('#academic_year_id').select2();
     
     
//     function printData()
//{
//    window.print();
////   var divToPrint=document.getElementById("dataTable");
////   newWin= window.open("");
////   newWin.document.write(divToPrint.outerHTML);
////   newWin.print();
////   newWin.close();
//}




</script>




